<!doctype html>
<html>

	<head>
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			.imgbox {
				display: grid;
				height: 100%;
				display: none;
			}

			.center-fit {
				max-width: 100%;
				max-height: 100vh;
				margin: auto;
			}

			@font-face {
				font-family: Agave;
				src: url(Fonts/Agave.ttf);
			}

			div {
				font-family: Agave;
			}

		</style>
	</head>

	<iframe
		src="" id="form"
		width="0" height="0" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>

	<body onload="submit()">
		
		<div class="imgbox" id="Spunky">
			<img class="center-fit" src='Images and Videos\SpunkySecret.gif'>

			<p style="font-size: 2em">Congrats! You Got SpunkyTheHedgeHog!</p>
			<p style="font-size: 2em">There is 10% chance in getting this Image, you must feel special!</p>
			<p style="font-size: 2em">You will get good sleeps for the rest of the week!</p>
		</div>

	</body>
	
	<!--
		https://docs.google.com/forms/d/e/1FAIpQLSf_Z3nol0PQztbRLilbfIA4XSbIXMroVQyyDc-SIpTzkSK5Eg/formResponse?&entry.1267494256=oof&submit=SUBMIT

		RickRoll
		dQw4w9WgXcQ

		September - Earth, Wind and Fire
		Gs069dndIYk

		AllStar - SmashMouth
		L_jWHffIx5E?t=37

		EEEAAAOOO - My Fucking Mess
		v1K4EAXe2oo

		Skeleton Dance - Silly Symphonies
		vOGhAV-84iI?t=147

		Tort Brush Mambo
		ZRTCwquyCHc

		Get Stick Bugged lol
		Tt7bzxurJ1I

		got legs?
		gSsJBO2JUO4

		he 10 hours
		3SCBYUE_X1U

		James May says Cheese
		SyimUCBIo6c

		Thurston the Cat (Full video)
		RRNanbmD1xk

		vibin'
		qMQ-y9dHE2k

		Sax Seal
		hgwpZvTWLmE

		Giwaffe & Cwow
		Dm5xkHzio

		Smooth Criminal
		h_D3VFfhvs4?t=56
	-->

	<script>

		async function submit() {

			var ShowSpunky = (Math.floor(Math.random() * 10)) == 0 ? true : false;
			var SpunkyText = '';
			if(ShowSpunky)
			{
				document.getElementById("Spunky").style.display = "block";
				SpunkyText = '%0A' + 'SpunkyTheHedgeHog!';
			}

			// get a new date (locale machine date time)
			var date = new Date();			
			var time = formatAMPM(date);

			var baseUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSf_Z3nol0PQztbRLilbfIA4XSbIXMroVQyyDc-SIpTzkSK5Eg/formResponse?&entry.1267494256=';
			var endUrl = time + '&submit=SUBMIT';

			var time = formatAMPM(date);

			var CommonVideoLinks = [
				'dQw4w9WgXcQ'
			]
			var RareVideoLinks = [
				'Gs069dndIYk',
				'L_jWHffIx5E',
				'v1K4EAXe2oo',
				'vOGhAV-84iI',
				'ZRTCwquyCHc',
				'Tt7bzxurJ1I',
				'gSsJBO2JUO4',
				'3SCBYUE_X1U',
				'SyimUCBIo6c',
				'RRNanbmD1xk',
				'qMQ-y9dHE2k',
				'hgwpZvTWLmE',
				'Dm5xkHzio',
				/*'h_D3VFfhvs4?t=56'*/
			]

			const ChanceOfRare = 1/2;
			var CommonOrRare = Math.round(Math.random()) > ChanceOfRare ? true : false;
			var ChosenVideoId;			
			
			if(CommonOrRare)
			{
				ChosenVideoId = CommonVideoLinks[Math.floor(Math.random() * (CommonVideoLinks.length))];
			}
			else
			{
				ChosenVideoId = RareVideoLinks[Math.floor(Math.random() * (RareVideoLinks.length))];
			}

			var ChosenVideoUrl = 'https://youtu.be/' + ChosenVideoId;

			var JsonUrl = 'https://noembed.com/embed?url=https://www.youtube.com/watch?v=' + ChosenVideoId; 
			var ChosenVideoTitle = await GetJsonTitle(JsonUrl);

			var VideoText = '%0A' + 'Video = ' + ChosenVideoTitle;
			if(ShowSpunky) VideoText = '';
			
			var baseUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSf_Z3nol0PQztbRLilbfIA4XSbIXMroVQyyDc-SIpTzkSK5Eg/formResponse?&entry.1267494256=';
			var endUrl =  VideoText + SpunkyText + time + '&submit=SUBMIT';

			let iframe = document.getElementById("form");
			iframe.src = baseUrl + endUrl;

			if(!ShowSpunky) LoadVideo(ChosenVideoUrl);
		}

		async function GetJsonTitle(JsonUrl)
		{
			return await fetch(JsonUrl).then(Response => Response.json()).then((out) => { return out.title});
		}
		
		function LoadVideo(url) {
			setTimeout(function () {
				window.location = url;
				}, 1000);
			}

		//using your function (passing in date)
		function formatAMPM(date) {
			// gets the hours
			var hours = date.getHours();
			// gets the day
			var days = date.getDay();
			// gets the month
			var minutes = date.getMinutes();
			// gets AM/PM
			var ampm = hours >= 12 ? 'pm' : 'am';
			// converts hours to 12 hour instead of 24 hour
			hours = hours % 12;
			// converts 0 (midnight) to 12
			hours = hours ? hours : 12; // the hour '0' should be '12'
			// converts minutes to have leading 0
			minutes = minutes < 10 ? '0' + minutes : minutes;

			// the time string
			var time = hours + ':' + minutes + ' ' + ampm;

			// gets the match for the date string we want
			var match = date.toString().match(/\w{3} \w{3} \d{1,2} \d{4}/);

			//the result
			return match[0] + ' ' + time;
		}

	</script>
	
</html>
